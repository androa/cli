project_name: nais-d
builds:
- env: [CGO_ENABLED=0, VERSION=v0.0.2]
  goos:
    - linux
    - windows
    - darwin
  goarch:
    - amd64
    - arm64
  id: "nais-d"
  dir: .
  main: ./main/nais-d
  binary: nais-d
  ldflags:
    - -s -w -X main.version={{.Version}} -X main.commit={{.Commit}} -X main.date={{ .CommitDate }} -X main.builtBy=goreleaser
checksum:
  name_template: 'checksums.txt'
changelog:
  sort: asc
  filters:
    exclude:
    - '^docs:'
    - '^test:'
release:
  github:
    owner: nais
    name: nais-d
brews:
- tap:
    owner: nais
    name: homebrew-tap
  name: nais-d
  homepage: "https://github.com/nais/nais-d"
  description: "Simple Aiven Kafka Debug Cli"
  folder: Formula
  install: |
    bin.install "nais-d"
  test: |
    assert_match version, shell_output("#{bin}/nais-d version")
nfpms:
  -
    package_name: nais-d
    file_name_template: "{{ .ProjectName }}_{{ .Version }}"
    vendor: NAV / nais team
    homepage: "https://github.com/nais/nais-d"
    maintainer: NAV / nais team
    description: "Simple Aiven Kafka Debug Cli"
    license: MIT
    formats:
      - deb
    version_metadata: git
